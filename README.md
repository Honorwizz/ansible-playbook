# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–¥–∞—á —Å Ansible

## üìå –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω—ã Ansuble Playbook/Role  –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ansible. –í–∫–ª—é—á–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker (`install_docker.yml`)
**–®–∞–≥–∏:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã.
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker.
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–∏—Å.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `apt`, `systemd`

---

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ MySQL-—Å–µ—Ä–≤–µ—Ä–∞ (`run_mysql.yml`)
**–®–∞–≥–∏:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω MySQL-—Å–µ—Ä–≤–µ—Ä.
- –ó–∞–ø—É—â–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å MySQL.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `apt`, `systemd`

---

### 3Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `user1`, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-–∫–ª—é—á–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ `hosts.txt` (`ansiblevault.yml`)
**–®–∞–≥–∏:**
- –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `user1`.
- –î–æ–±–∞–≤–ª–µ–Ω SSH-–∫–ª—é—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ansible Vault.
- –°–æ–∑–¥–∞–Ω –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å `hosts.txt` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–∞–º–∏.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `user`, `authorized_key`, `ansible-vault`

#### üîπ –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ `vault.yml` –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ SSH-–∫–ª—é—á–∞:
```yaml
---
ssh_public_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQ..."
```

–î–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
ansible-vault encrypt vault.yml
```

#### üîπ –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ `hosts.txt`:
```ini
[webservers]
web1 ansible_host=192.168.1.10 ansible_user=root
web2 ansible_host=192.168.1.11 ansible_user=root

[dbservers]
db1 ansible_host=192.168.1.20 ansible_user=root
```

üìå **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ö–æ—Å—Ç–∞–º–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–æ–≤:
  ```bash
  ansible all -i hosts.txt -m ping
  ```
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö:
  ```bash
  ansible all -i hosts.txt -m command -a "uptime"
  ```

---

### 4Ô∏è‚É£ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏ —É–¥–∞–ª–µ–Ω–∏–µ–º Postfix (`postfix_playbook.yml`)
**–®–∞–≥–∏:**
- –ü—Ä–∏ `--tags init_postfix` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è Postfix.
- –ü—Ä–∏ `--tags drop_postfix` Postfix —É–¥–∞–ª—è–µ—Ç—Å—è.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `apt`, `systemd`

---

<!--
### 5Ô∏è‚É£ Ansible-—Ä–æ–ª—å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ FTP-—Å–µ—Ä–≤–µ—Ä–∞ `vsftpd`
**–®–∞–≥–∏:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω FTP-—Å–µ—Ä–≤–µ—Ä `vsftpd`.
- –ó–∞–ø—É—â–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `apt`, `systemd`

---

### 6Ô∏è‚É£ Ansible-—Ä–æ–ª—å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä—É—é—â–µ–≥–æ DNS-—Å–µ—Ä–≤–µ—Ä–∞ `dnsmasq`
**–®–∞–≥–∏:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `dnsmasq`.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω –∫—ç—à–∏—Ä—É—é—â–∏–π DNS-—Å–µ—Ä–≤–µ—Ä.
- –ó–∞–ø—É—â–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `apt`, `systemd`

---

### 7Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã `superusers` –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
**–®–∞–≥–∏:**
- –°–æ–∑–¥–∞–Ω–∞ –≥—Ä—É–ø–ø–∞ `superusers`.
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ `user2` –∏ `user3`.
- –ù–∞–∑–Ω–∞—á–µ–Ω—ã –ø—Ä–∞–≤–∞ `sudo` —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ñ–∞–π–ª–∞ `sudoers`.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `group`, `user`, `lineinfile`

---

### 8Ô∏è‚É£ Ansible-—Ä–æ–ª—å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `nginx+php-fpm`
**–®–∞–≥–∏:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã `nginx` –∏ `php-fpm`.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω `nginx` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PHP.
- –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç `index.php` —Å `phpinfo();`.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `apt`, `template`, `file`, `systemd`

---

### 9Ô∏è‚É£ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ `nginx_php`
**–®–∞–≥–∏:**
- `DocumentRoot` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `/opt/nginx/ansible`.
- –î–æ–±–∞–≤–ª–µ–Ω handler –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ `nginx` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

üìå **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏:** `file`, `copy`, `systemd`

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
**–®–∞–≥–∏:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ansible.
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `ansible.cfg` –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å `hosts.txt`.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ playbook:
   ```bash
   ansible-playbook install_docker.yml
   ansible-playbook run_mysql.yml
   ansible-playbook ansiblevault.yml
   ansible-playbook postfix_playbook.yml
   ```
4. –î–ª—è —Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ansible-galaxy` –∏ `roles/`.

---

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Ansible** (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
- **YAML** (–æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- **Ansible Vault** (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
- **Nginx, MySQL, Docker, Postfix, vsftpd, dnsmasq** (—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã)

---

## üë• –ê–≤—Ç–æ—Ä—ã
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Ansible.

-->
